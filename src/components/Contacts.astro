---
interface Props {
	fetchURL?: string;
	mapImg?: string;
	title?: string;
}

const {fetchURL = '', mapImg = '', title = ''} = Astro.props;
const salons = await fetch(fetchURL).then((response) => response.json());
import { SITE_NAME, LEGAL_ENTITY } from '@/const.js';
import { Icon } from 'astro-icon'
import { phoneFormat } from '@/js/use/numbers.format';
---

<section
	class={`section bg-gray-50 ${title ? 'pt-8 sm:pt-16 pb-0' : 'p-0'}`}
	id="contacts">
	<div class="container relative">
		{
			title ? (
				<h2 class="text-xl sm:text-4xl font-medium mb-14 before:hidden text-left mx-0">
					{title}
				</h2>
			) : (
				''
			)
		}

		{
			salons.length < 2 && salons.length != 0 ? (
				<div class="relative lg:absolute lg:max-w-md w-full lg:top-[135px] s1024_1074:left-[45px] s1280_1330:left-[45px] s1536_1586:left-[45px] py-8 px-4 sm:px-8 z-10 bg-white map-info shadow-2xl">
					<div class="flex items-center flex-nowrap flex-col sm:flex-row gap-1 sm:gap-4 mb-6">
						<div class="sm:pr-4 sm:border-r border-r-[#628788]">
							<img src="./img/logo.svg" class="max-h-10" alt={SITE_NAME} />
						</div>
						<div class="text-xl sm:text-2xl leading-none uppercase tracking-wider sm:tracking-normal">
							Альфа
						</div>
					</div>
					<div class="flex flex-nowrap gap-2 sm:gap-4 mb-4">
						<svg
							xmlns="http://www.w3.org/2000/svg"
							fill="none"
							viewBox="0 0 24 24"
							stroke-width="1.5"
							stroke="currentColor"
							class="w-7 h-7 flex-shrink-0">
							<path
								stroke-linecap="round"
								stroke-linejoin="round"
								d="M15 10.5a3 3 0 11-6 0 3 3 0 016 0z"
							/>
							<path
								stroke-linecap="round"
								stroke-linejoin="round"
								d="M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1115 0z"
							/>
						</svg>
						<div>
							<div class="font-medium mb-2 sm:text-lg">
								г. Самара, ул. Новоурицкая, д. 22
							</div>
							<div>ООО «Автоцентр Альфа»</div>
							<div>ИНН 6324066475</div>
						</div>
					</div>
					<div class="flex flex-nowrap gap-2 sm:gap-4 mb-4">
						<svg
							xmlns="http://www.w3.org/2000/svg"
							fill="none"
							viewBox="0 0 24 24"
							stroke-width="1.5"
							stroke="currentColor"
							class="w-7 h-7 flex-shrink-0">
							<path
								stroke-linecap="round"
								stroke-linejoin="round"
								d="M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z"
							/>
						</svg>
						<div class="font-medium mb-2 sm:text-lg">
							Ежедневно с&nbsp;08:00 до&nbsp;20:00
						</div>
					</div>
					<div class="flex flex-nowrap gap-2 sm:gap-4 mb-4">
						<svg
							xmlns="http://www.w3.org/2000/svg"
							fill="none"
							viewBox="0 0 24 24"
							stroke-width="1.5"
							stroke="currentColor"
							class="w-7 h-7 flex-shrink-0">
							<path
								stroke-linecap="round"
								stroke-linejoin="round"
								d="M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 002.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 01-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 00-1.091-.852H4.5A2.25 2.25 0 002.25 4.5v2.25z"
							/>
						</svg>
						<a
							href="tel:+78462125395"
							class="font-medium mb-2 sm:text-xl goal-click-lead-tel"
							data-gtm-vis-first-on-screen166774112_38="4126"
							data-gtm-vis-recent-on-screen166774112_38="4764"
							data-gtm-vis-total-visible-time166774112_38="100"
							data-gtm-vis-has-fired166774112_38="1">
							+7 (846) 212-53-95
						</a>
					</div>
					<div class="font-bold sm:text-xl mb-4">
						Остались вопросы? Мы&nbsp;перезвоним!
					</div>
					<a
						class="popup-link btn black max-w-[400px] w-full block"
						href="#common-modal"
						data-title="Заказать звонок"
						data-form_name="Заказ звонка. Секция Контакты">
						Заказать звонок
					</a>
				</div>
			) : (
				''
			)
		}
	</div>

	<div class="map h-[500px]" style={`background-image: url(${mapImg})`}>
		<div class="loader loader-default"></div>
		<div id="map"></div>
	</div>
</section>
